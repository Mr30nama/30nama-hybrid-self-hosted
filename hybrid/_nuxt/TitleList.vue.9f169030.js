import{_ as F}from"./TitleFrame.a8d45c49.js";import{d as T,r as $,V,o as S,g as s,h as u,i as P,z as L,N as E,E as d,j as f,ab as z,m as b,F as C,A as I,t as N,P as j,k as g,l as x,B as R,c as G,a5 as q,aJ as A,a6 as H,a8 as M,a7 as O,aB as Z,a as D,R as J,ap as K}from"./entry.a7940ac4.js";import{_ as Q}from"./ContentPop-v2.vue.d905093c.js";const U={key:0},W={key:1},X={key:2},Y={key:3},ee=T({__name:"BasePagination",props:{maxPage:{default:1},yield:{type:Boolean},selectedPage:{default:1},isLoading:{type:Boolean}},emits:["pageChanged"],setup(B,{emit:k}){const r=B,e=$(1),p=k;async function h(a){r.yield||e.value===a||(await new Promise(i=>setTimeout(i,25)),e.value=a,p("pageChanged",a))}function l(){return e.value<=3?3:e.value}function m(a){const i=[];for(const c of a)c>0&&c<=r.maxPage&&i.push(c);return i}function o(){const a=[l()-2,l()-1,l(),l()+1,l()+2];if(a.length===5&&r.maxPage===5)return m([1,2,3,4,5]);for(const i in a)if(a[i]>=r.maxPage){if(i==="3")return m([l()-3,l()-2,l()-1,l(),l()+1]);if(i==="2")return m([l()-4,l()-3,l()-2,l()-1,l()])}return a}return V(()=>r.selectedPage,()=>{e.value=r.selectedPage}),S(()=>e.value=r.selectedPage),(a,i)=>{const c=j;return s(),u("ul",{class:d(["local-numbers flex flex-row items-center gap-1 text-base",{"disable-block":a.isLoading}]),dir:"ltr"},[o()[0]>1?(s(),u("li",U,[P(c,{class:d(["hover:bg-bg-10/70 flex min-w-[2em] shrink-0 items-center justify-center rounded-xl px-2 py-1 transition-colors",{"bg-primary-500 hover:bg-primary-500 !rounded-xl text-white":f(e)===1}]),to:{query:{...(a._.provides[z]||a.$route).query,page:1}},onClick:i[0]||(i[0]=t=>h(1))},{default:L(()=>[E(" 1 ")]),_:1},8,["class","to"])])):b("",!0),o()[0]>1?(s(),u("li",W," ... ")):b("",!0),(s(!0),u(C,null,I(o(),t=>(s(),u("li",{key:t.id},[P(c,{class:d(["hover:bg-bg-10/70 flex min-w-[2em] shrink-0 items-center justify-center rounded-xl px-2 py-1 transition-colors",{"bg-primary-500 hover:bg-primary-500 !rounded-xl text-white":f(e)===t}]),to:{query:{...(a._.provides[z]||a.$route).query,page:t}},onClick:n=>h(t)},{default:L(()=>[E(N(t.toString()),1)]),_:2},1032,["class","to","onClick"])]))),128)),f(e)+2<a.maxPage&&a.maxPage>5?(s(),u("li",X," ... ")):b("",!0),f(e)+2<a.maxPage&&a.maxPage>5?(s(),u("li",Y,[P(c,{class:d(["hover:bg-bg-10/70 flex min-w-[2em] shrink-0 items-center justify-center rounded-xl px-2 py-1 transition-colors",{"bg-primary-500 hover:bg-primary-500 !rounded-xl text-white":f(e)===a.maxPage}]),to:{query:{...(a._.provides[z]||a.$route).query,page:a.maxPage}},onClick:i[1]||(i[1]=t=>h(a.maxPage))},{default:L(()=>[E(N(a.maxPage.toString()),1)]),_:1},8,["class","to"])])):b("",!0)],2)}}}),te={class:"titles-renderer-group"},ae={role:"none",class:"pointer-events-none absolute top-1/2 z-10 -translate-y-1/2 ltr:-left-8 rtl:-right-8"},ne=g("path",{d:"M0 30.5C9.52005 21.5889 4.18533 11.5501 0 8V30.5Z"},null,-1),se=g("path",{d:"M3 11.5C2 10.3333 0 6.4 0 0V8L3 11.5Z"},null,-1),re=g("path",{d:"M3 27C2 28.1667 0 32 0 38V30.5L3 27Z"},null,-1),oe=[ne,se,re],le={class:"local-numbers absolute top-1/2 z-10 -translate-y-1/2 text-2xl font-semibold ltr:left-0 rtl:right-0"},ie=T({__name:"TitlesRendererGroup",props:{isLoading:{type:Boolean},visible:{type:Boolean},transparent:{type:Boolean},page:{},items:{}},emits:["onInView","reachedEnd"],setup(B,{emit:k}){const r=B,e=k,p=$({firstEntry:r.items[0],lastEntry:r.items[r.items.length-1],entries:r.items.slice(1,r.items.length-1)}),h=$(null),l=$(null),m=$(null),o=new IntersectionObserver(t=>t.map(a),{threshold:0});function a(t){if(t.target.getAttribute("data-is-skeleton"))return t.isIntersecting?e("onInView"):null;t.target.getAttribute("data-is-first")&&(t.positionInGroup="start"),t.target.getAttribute("data-is-last")&&(t.positionInGroup="end"),t.isIntersecting&&t.positionInGroup==="end"&&e("reachedEnd")}async function i(){var t,n;m.value&&(o==null||o.unobserve(m.value)),await R(),h.value&&(o==null||o.observe((t=h.value)==null?void 0:t.$el)),l.value&&(o==null||o.observe((n=l.value)==null?void 0:n.$el))}async function c(){var t,n;h.value&&(o==null||o.unobserve((t=h.value)==null?void 0:t.$el)),l.value&&(o==null||o.unobserve((n=l.value)==null?void 0:n.$el)),await R(),m.value&&(o==null||o.observe(m.value))}return S(()=>{r.isLoading?c():i()}),V(()=>r.isLoading,t=>{t?c():i()}),(t,n)=>{const y=F;return s(),u("div",te,[g("div",{class:d(["relative flex h-24 w-full items-center px-6",{invisible:t.page===1}])},[g("span",ae,[(s(),u("svg",{role:"none",class:d(["fill-bg-12 h-full w-8 transform-gpu will-change-transform rtl:rotate-180",{hidden:t.transparent}]),viewBox:"0 0 6 38",xmlns:"http://www.w3.org/2000/svg"},oe,2)),g("span",le,N(t.page),1)]),g("span",{class:d(["bg-bg-12 block h-2 w-[10%] overflow-hidden rounded-full ltr:origin-left rtl:origin-right",{"!bg-bg-11":t.transparent}])},null,2)],2),t.isLoading?(s(),u("div",{key:1,ref_key:"skeletonComponent",ref:m,class:d([{"-translate-y-24":t.page===1},"title-list grid w-full grid-cols-[repeat(auto-fit,minmax(200px,1fr))] place-items-center"]),"data-is-skeleton":"true"},[(s(!0),u(C,null,I(t.items.length,v=>(s(),x(y,{key:v,size:"medium","is-loading":""}))),128))],2)):(s(),u("div",{key:0,class:d([{"-translate-y-24":t.page===1},"title-list grid w-full grid-cols-[repeat(auto-fit,minmax(200px,1fr))] place-items-center"])},[P(y,{ref_key:"firstTitleComponent",ref:h,size:"medium","data-is-first":"true",data:f(p).firstEntry},null,8,["data"]),(s(!0),u(C,null,I(f(p).entries,(v,w)=>(s(),x(y,{key:w,size:"medium",data:v},null,8,["data"]))),128)),t.items.length>1?(s(),x(y,{key:0,ref_key:"lastTitleComponent",ref:l,size:"medium","data-is-last":"true",data:f(p).lastEntry},null,8,["data"])):b("",!0)],2))])}}}),ue=T({__name:"TitlesRenderer",props:{maxPage:{},data:{},transparent:{type:Boolean},isLoading:{type:Boolean}},emits:["loadNextPage"],setup(B,{emit:k}){const r=B,e=k,p=G(()=>{const n=Object.keys(r.data).map(y=>Number(y));return n.length?Math.max(...n):0}),h=G(()=>{const n=[];for(let y=1;y<=p.value;y++)n.push(r.data[y]);return n});function l(n){n>=r.maxPage||r.data[n+1]||e("loadNextPage",n+1)}const m=$(1496);function o(){const n=document.querySelectorAll(".titles-renderer-group");return n.length?n[n.length-1].clientHeight:0}function a(){p.value>=r.maxPage||r.isLoading||e("loadNextPage",p.value+1)}let{list:i,containerProps:c,wrapperProps:t}=q(h,{itemHeight:m.value,overscan:3});return A(window,"resize",Z(()=>m.value=o(),1e3)),V(m,()=>{const n=q(h,{itemHeight:m.value});i=n.list,c=n.containerProps,t=n.wrapperProps}),S(async()=>{await R(),m.value=o()}),(n,y)=>{const v=ie;return s(),u("div",null,[g("div",O(f(c),{class:"hide-scrollbar h-full transform-gpu p-8"}),[g("div",H(M(f(t))),[(s(!0),u(C,null,I(f(i),w=>(s(),x(v,{key:w.index,transparent:n.transparent,page:Number(w.index+1),items:w.data,onReachedEnd:_=>l(Number(w.index+1))},null,8,["transparent","page","items","onReachedEnd"]))),128)),f(p)<n.maxPage?(s(),x(v,{key:0,page:f(p)+1,transparent:n.transparent,items:Array(24).fill({}),"is-loading":!0,onOnInView:a},null,8,["page","transparent","items"])):b("",!0)],16)],16)])}}}),de={class:"flex w-full flex-col"},pe={key:0,class:"flex w-full pb-24"},ge={key:0,class:"title-list grid w-full grid-cols-[repeat(auto-fit,minmax(200px,1fr))] place-items-center"},me={key:1,class:"title-list grid w-full grid-cols-[repeat(auto-fit,minmax(200px,1fr))] place-items-center"},ye=T({__name:"TitleList",props:{title:{},icon:{},style:{},aligned:{type:Boolean},transparent:{type:Boolean},secondaryTitleType:{type:Boolean},data:{},resultInfo:{},isLoading:{type:Boolean}},emits:["pageChanged"],setup(B){const k=D(),{infiniteScrolling:r}=J();return V(()=>k.query.page,e=>{var p;r.value||(p=document.getElementById("main-content-app"))==null||p.scrollIntoView({behavior:"smooth"})}),(e,p)=>{var a,i;const h=F,l=ee,m=ue,o=Q;return s(),u("div",{id:"title-list-result",class:d(["mt-[-2.4rem] flex w-full flex-shrink-0 flex-col gap-20",{"!mt-[-4.7rem]":e.aligned}])},[P(o,{title:e.title,foreground:(a=e.style)==null?void 0:a.foreground,"shadow-background":(i=e.style)==null?void 0:i.shadowFore,transparent:e.transparent,"secondary-title-type":e.secondaryTitleType,icon:e.icon,class:"h-[calc(100%_+_3.1rem)]"},{header:L(()=>[K(e.$slots,"header")]),content:L(()=>{var c,t,n,y,v,w;return[g("div",de,[f(r)?b("",!0):(s(),u("div",pe,[e.isLoading?(s(),u("div",ge,[(s(),u(C,null,I(24,_=>P(h,{key:_,"is-loading":"",size:"medium"})),64))])):(s(),u("div",me,[(s(!0),u(C,null,I(e.resultInfo?e.data[e.resultInfo.page]:[],_=>(s(),x(h,{key:_.id,size:"medium",data:_},null,8,["data"]))),128))]))])),!f(r)&&e.resultInfo?(s(),u("div",{key:1,class:d(["absolute bottom-0 left-1/2 flex h-12 -translate-x-1/2 justify-center px-8",(c=e.style)==null?void 0:c.background])},[g("span",{class:d([{hidden:e.transparent},"absolute top-0 h-[1.5em] w-[1.5em] overflow-hidden ltr:left-0 rtl:right-0"])},[g("span",{class:d(["absolute top-0 h-[200%] w-[200%] rounded-[100%] shadow-[0_0_0_200px] ltr:left-0 rtl:right-0",(t=e.style)==null?void 0:t.shadowFore])},null,2)],2),g("span",{class:d([{hidden:e.transparent},"absolute top-0 h-[1.5em] w-[1.5em] overflow-hidden ltr:right-0 rtl:left-0"])},[g("span",{class:d(["absolute top-0 h-[200%] w-[200%] rounded-[100%] shadow-[0_0_0_200px] ltr:right-0 rtl:left-0",(n=e.style)==null?void 0:n.shadowFore])},null,2)],2),g("span",{class:d([{hidden:e.transparent},"absolute bottom-0 h-[1.5em] w-[1.5em] overflow-hidden ltr:right-full rtl:left-full"])},[g("span",{class:d(["absolute bottom-0 h-[200%] w-[200%] rounded-[100%] shadow-[0_0_0_200px] ltr:right-0 rtl:left-0",(y=e.style)==null?void 0:y.shadowBack])},null,2)],2),g("span",{class:d([{hidden:e.transparent},"absolute bottom-0 h-[1.5em] w-[1.5em] overflow-hidden ltr:left-full rtl:right-full"])},[g("span",{class:d(["absolute bottom-0 h-[200%] w-[200%] rounded-[100%] shadow-[0_0_0_200px] ltr:left-0 rtl:right-0",(v=e.style)==null?void 0:v.shadowBack])},null,2)],2),P(l,{"max-page":e.resultInfo.pages,"is-loading":e.isLoading,"selected-page":e.resultInfo.page,onPageChanged:p[0]||(p[0]=_=>e.$emit("pageChanged",_))},null,8,["max-page","is-loading","selected-page"])],2)):b("",!0),f(r)?(s(),x(m,{key:2,class:d(["h-[calc(100vh_-_11.4em_-_1.5em_-_var(--header-size)_*_1px)]",{"!h-[calc(100vh_-_11.4em_+_2.3em_-_var(--header-size)_*_1px)]":e.aligned}]),"is-loading":e.isLoading,transparent:e.transparent,data:e.data,"max-page":((w=e.resultInfo)==null?void 0:w.pages)||1,onLoadNextPage:p[1]||(p[1]=_=>e.$emit("pageChanged",_))},null,8,["class","is-loading","transparent","data","max-page"])):b("",!0)])]}),_:3},8,["title","foreground","shadow-background","transparent","secondary-title-type","icon"])],2)}}});export{ye as _};
